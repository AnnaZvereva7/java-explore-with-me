DROP TABLE IF EXISTS stat_data;

CREATE TABLE if NOT EXISTS stat_data (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    app VARCHAR(20) NOT NULL,
    uri VARCHAR(50) NOT NULL,
    ip VARCHAR(16) NOT NULL,
    request_time TIMESTAMP NOT NULL,
    CONSTRAINT check_ip CHECK (ip ~'((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(\.|$)){4}')
);